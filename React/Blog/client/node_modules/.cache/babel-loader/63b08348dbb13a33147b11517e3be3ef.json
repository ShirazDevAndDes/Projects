{"ast":null,"code":"import _asyncToGenerator from\"D:/Projects/Git Repo Public/React/Blog/client/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _regeneratorRuntime from\"D:\\\\Projects\\\\Git Repo Public\\\\React\\\\Blog\\\\client\\\\node_modules\\\\@babel\\\\runtime\\\\regenerator\\\\index.js\";import axios from\"axios\";import Cookies from\"js-cookie\";import{useEffect}from\"react\";import{Navigate,Outlet,useNavigate}from\"react-router-dom\";import{jsx as _jsx}from\"react/jsx-runtime\";export default function ProtectedRoute(){var userCookie=Cookies.get(\"user\");var navigate=useNavigate();function checkAuth(_x){return _checkAuth.apply(this,arguments);}function _checkAuth(){_checkAuth=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(token){var config;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:config={withCredentials:true};_context.next=3;return axios.post(process.env.REACT_APP_SERVER_BASE+\"checkAuth\",{token:token},config).then(function(response){var res=response.data;// console.log(res.success);\n}).catch(function(err){var error=err.response.data;// console.log(error);\n// console.log(error);\nif(error){navigate(\"/admin\");}});case 3:case\"end\":return _context.stop();}}},_callee);}));return _checkAuth.apply(this,arguments);}var user=JSON.parse(userCookie);var token=user.token;// console.log(user);\ncheckAuth(token);if(!userCookie){return/*#__PURE__*/_jsx(Navigate,{to:\"/admin\",replace:true});}return/*#__PURE__*/_jsx(Outlet,{});}","map":{"version":3,"names":["axios","Cookies","useEffect","Navigate","Outlet","useNavigate","ProtectedRoute","userCookie","get","navigate","checkAuth","token","config","withCredentials","post","process","env","REACT_APP_SERVER_BASE","then","response","res","data","catch","err","error","user","JSON","parse"],"sources":["D:/Projects/Git Repo Public/React/Blog/client/src/components/protectedRoutes.js"],"sourcesContent":["import axios from \"axios\";\r\nimport Cookies from \"js-cookie\";\r\nimport { useEffect } from \"react\";\r\nimport { Navigate, Outlet, useNavigate } from \"react-router-dom\";\r\n\r\nexport default function ProtectedRoute() {\r\n  const userCookie = Cookies.get(\"user\");\r\n\r\n  const navigate = useNavigate();\r\n\r\n  async function checkAuth(token) {\r\n    const config = {\r\n      withCredentials: true,\r\n    };\r\n    await axios\r\n      .post(process.env.REACT_APP_SERVER_BASE + \"checkAuth\", { token }, config)\r\n      .then((response) => {\r\n        const res = response.data;\r\n        // console.log(res.success);\r\n      })\r\n      .catch((err) => {\r\n        const error = err.response.data;\r\n        // console.log(error);\r\n\r\n        if (error) {\r\n          navigate(\"/admin\");\r\n        }\r\n      });\r\n  }\r\n\r\n  const user = JSON.parse(userCookie);\r\n  const token = user.token;\r\n  // console.log(user);\r\n\r\n  checkAuth(token);\r\n\r\n  if (!userCookie) {\r\n    return <Navigate to={\"/admin\"} replace />;\r\n  }\r\n\r\n  return <Outlet />;\r\n}\r\n"],"mappings":"mRAAA,MAAOA,CAAAA,KAAP,KAAkB,OAAlB,CACA,MAAOC,CAAAA,OAAP,KAAoB,WAApB,CACA,OAASC,SAAT,KAA0B,OAA1B,CACA,OAASC,QAAT,CAAmBC,MAAnB,CAA2BC,WAA3B,KAA8C,kBAA9C,C,2CAEA,cAAe,SAASC,CAAAA,cAAT,EAA0B,CACvC,GAAMC,CAAAA,UAAU,CAAGN,OAAO,CAACO,GAAR,CAAY,MAAZ,CAAnB,CAEA,GAAMC,CAAAA,QAAQ,CAAGJ,WAAW,EAA5B,CAHuC,QAKxBK,CAAAA,SALwB,uIAKvC,iBAAyBC,KAAzB,6HACQC,MADR,CACiB,CACbC,eAAe,CAAE,IADJ,CADjB,uBAIQb,CAAAA,KAAK,CACRc,IADG,CACEC,OAAO,CAACC,GAAR,CAAYC,qBAAZ,CAAoC,WADtC,CACmD,CAAEN,KAAK,CAALA,KAAF,CADnD,CAC8DC,MAD9D,EAEHM,IAFG,CAEE,SAACC,QAAD,CAAc,CAClB,GAAMC,CAAAA,GAAG,CAAGD,QAAQ,CAACE,IAArB,CACA;AACD,CALG,EAMHC,KANG,CAMG,SAACC,GAAD,CAAS,CACd,GAAMC,CAAAA,KAAK,CAAGD,GAAG,CAACJ,QAAJ,CAAaE,IAA3B,CACA;AAAA;AAEA,GAAIG,KAAJ,CAAW,CACTf,QAAQ,CAAC,QAAD,CAAR,CACD,CACF,CAbG,CAJR,uDALuC,4CAyBvC,GAAMgB,CAAAA,IAAI,CAAGC,IAAI,CAACC,KAAL,CAAWpB,UAAX,CAAb,CACA,GAAMI,CAAAA,KAAK,CAAGc,IAAI,CAACd,KAAnB,CACA;AAEAD,SAAS,CAACC,KAAD,CAAT,CAEA,GAAI,CAACJ,UAAL,CAAiB,CACf,mBAAO,KAAC,QAAD,EAAU,EAAE,CAAE,QAAd,CAAwB,OAAO,KAA/B,EAAP,CACD,CAED,mBAAO,KAAC,MAAD,IAAP,CACD"},"metadata":{},"sourceType":"module"}