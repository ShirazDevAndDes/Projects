{"ast":null,"code":"import _asyncToGenerator from\"D:/Projects/Git Repo Public/React/Blog/client/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _defineProperty from\"D:/Projects/Git Repo Public/React/Blog/client/node_modules/@babel/runtime/helpers/esm/defineProperty.js\";import _objectSpread from\"D:/Projects/Git Repo Public/React/Blog/client/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _slicedToArray from\"D:/Projects/Git Repo Public/React/Blog/client/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import _regeneratorRuntime from\"D:\\\\Projects\\\\Git Repo Public\\\\React\\\\Blog\\\\client\\\\node_modules\\\\@babel\\\\runtime\\\\regenerator\\\\index.js\";import axios from\"axios\";import{toast}from\"react-toastify\";import{useState}from\"react\";import Editor from\"../../components/editor\";import ImageUpload from\"../../components/imageUpload\";import SelectCategories from\"../../components/selectCategories\";import SelectTags from\"../../components/selectTags\";import Cookies from\"js-cookie\";import{Helmet}from\"react-helmet-async\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export default function CreatePost(){// User Cookie\nvar user=JSON.parse(Cookies.get(\"user\"));var _useState=useState({postCategories:[],postContent:{},postImage:\"\",postTags:[],postTitle:\"\"}),_useState2=_slicedToArray(_useState,2),formInput=_useState2[0],setformInput=_useState2[1];// Handle form input on change of input field\nfunction handleInput(event){var target=event.target;var name=target.name;var value=target.value;setformInput(_objectSpread(_objectSpread({},formInput),{},_defineProperty({},name,value)));// console.log(formInput);\n}// Handle form submit on click\nfunction handleSubmit(_x){return _handleSubmit.apply(this,arguments);}// Get Image to set in formInput\nfunction _handleSubmit(){_handleSubmit=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(e){var config,formData;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:e.preventDefault();console.log(formInput);config={headers:{\"content-type\":\"multipart/form-data\",Authorization:\"Bearer \".concat(user.token)}};// Set empty FormData\nformData=new FormData();// Add data to FormData before submit\nObject.entries(formInput).forEach(function(_ref){var _ref2=_slicedToArray(_ref,2),key=_ref2[0],value=_ref2[1];if(key===\"postImage\"){formData.append(key,value);}else{formData.append(key,JSON.stringify(value));}});// Send form data\n_context.next=7;return axios.post(process.env.REACT_APP_SERVER_BASE+\"createPost\",formData,config).then(function(response){var res=response.data;var success=res.success;console.log(success);if(success){toast.success(success,{position:toast.POSITION.TOP_RIGHT});}}).catch(function(err){var error=err.response.data;console.log(\"Error: \",error);if(error){toast.error(error);}});case 7:case\"end\":return _context.stop();}}},_callee);}));return _handleSubmit.apply(this,arguments);}var getImage=function getImage(e){// console.log(e.target.files[0]);\nsetformInput(_objectSpread(_objectSpread({},formInput),{},{postImage:e.target.files[0]}));// console.log(formInput);\n};// Get Post Content to set in formInput\nvar getValue=function getValue(value){// check do you get dynamic value here\n// console.log(\"EditorValue: \" + JSON.stringify(value));\nsetformInput(_objectSpread(_objectSpread({},formInput),{},{postContent:value}));};// Get Categories to set in formInput\nvar getCategories=function getCategories(value){setformInput(_objectSpread(_objectSpread({},formInput),{},{postCategories:value}));console.log(\"Category: \",value);};// Get Tags to set in formInput\nvar getTags=function getTags(value){setformInput(_objectSpread(_objectSpread({},formInput),{},{postTags:value}));console.log(\"Tags: \",value);};return/*#__PURE__*/_jsxs(\"div\",{className:\"px-5\",children:[/*#__PURE__*/_jsxs(Helmet,{children:[/*#__PURE__*/_jsx(\"title\",{children:\"Admin: Create Post\"}),/*#__PURE__*/_jsx(\"meta\",{name:\"description\",content:\"Helmet application\"})]}),/*#__PURE__*/_jsx(\"div\",{className:\"card shadow\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"card-body\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"h2 p-1\",children:\"Create Post\"}),/*#__PURE__*/_jsxs(\"form\",{children:[/*#__PURE__*/_jsx(ImageUpload,{label:\"Upload Image\",getImage:getImage,defaultImage:process.env.REACT_APP_SERVER_BASE+\"No_Image_Available.jpg\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"mb-3\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"post_title\",className:\"col-12 ps-2 pb-1 text-black-50\",children:\"Title\"}),/*#__PURE__*/_jsx(\"div\",{className:\"col-12\",children:/*#__PURE__*/_jsx(\"input\",{type:\"text\",className:\"form-control rounded-pill\",name:\"postTitle\",id:\"postTitle\",onChange:handleInput})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"mb-3\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"post_cat\",className:\"col-12 ps-2 pb-1 text-black-50\",children:\"Categories\"}),/*#__PURE__*/_jsx(SelectCategories,{getCategories:getCategories})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"mb-3\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"post_cat\",className:\"col-12 ps-2 pb-1 text-black-50\",children:\"Tags\"}),/*#__PURE__*/_jsx(SelectTags,{getTags:getTags})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"mb-3\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"post_des\",className:\"col-12 ps-2 pb-1 text-black-50\",children:\"Content\"}),/*#__PURE__*/_jsx(\"div\",{className:\"col-12\",children:/*#__PURE__*/_jsx(Editor,{getValue:getValue,editorContent:\"\"})})]}),/*#__PURE__*/_jsx(\"div\",{className:\"mb-5\",children:/*#__PURE__*/_jsx(\"div\",{className:\"col-sm-10\",children:/*#__PURE__*/_jsx(\"button\",{type:\"submit\",className:\"btn btn-orange\",onClick:handleSubmit,children:\"Submit\"})})})]})]})})]});}","map":{"version":3,"names":["axios","toast","useState","Editor","ImageUpload","SelectCategories","SelectTags","Cookies","Helmet","CreatePost","user","JSON","parse","get","postCategories","postContent","postImage","postTags","postTitle","formInput","setformInput","handleInput","event","target","name","value","handleSubmit","e","preventDefault","console","log","config","headers","Authorization","token","formData","FormData","Object","entries","forEach","key","append","stringify","post","process","env","REACT_APP_SERVER_BASE","then","response","res","data","success","position","POSITION","TOP_RIGHT","catch","err","error","getImage","files","getValue","getCategories","getTags"],"sources":["D:/Projects/Git Repo Public/React/Blog/client/src/pages/admin/createPost.js"],"sourcesContent":["import axios from \"axios\";\r\nimport { toast } from \"react-toastify\";\r\nimport { useState } from \"react\";\r\n\r\nimport Editor from \"../../components/editor\";\r\nimport ImageUpload from \"../../components/imageUpload\";\r\nimport SelectCategories from \"../../components/selectCategories\";\r\nimport SelectTags from \"../../components/selectTags\";\r\nimport Cookies from \"js-cookie\";\r\nimport { Helmet } from \"react-helmet-async\";\r\n\r\nexport default function CreatePost() {\r\n  // User Cookie\r\n  const user = JSON.parse(Cookies.get(\"user\"));\r\n\r\n  const [formInput, setformInput] = useState({\r\n    postCategories: [],\r\n    postContent: {},\r\n    postImage: \"\",\r\n    postTags: [],\r\n    postTitle: \"\",\r\n  });\r\n\r\n  // Handle form input on change of input field\r\n  function handleInput(event) {\r\n    const target = event.target;\r\n    const name = target.name;\r\n    const value = target.value;\r\n\r\n    setformInput({\r\n      ...formInput,\r\n      [name]: value,\r\n    });\r\n\r\n    // console.log(formInput);\r\n  }\r\n\r\n  // Handle form submit on click\r\n  async function handleSubmit(e) {\r\n    e.preventDefault();\r\n    console.log(formInput);\r\n\r\n    const config = {\r\n      headers: {\r\n        \"content-type\": \"multipart/form-data\",\r\n        Authorization: `Bearer ${user.token}`,\r\n      },\r\n    };\r\n\r\n    // Set empty FormData\r\n    const formData = new FormData();\r\n\r\n    // Add data to FormData before submit\r\n    Object.entries(formInput).forEach(([key, value]) => {\r\n      if (key === \"postImage\") {\r\n        formData.append(key, value);\r\n      } else {\r\n        formData.append(key, JSON.stringify(value));\r\n      }\r\n    });\r\n\r\n    // Send form data\r\n    await axios\r\n      .post(process.env.REACT_APP_SERVER_BASE + \"createPost\", formData, config)\r\n      .then((response) => {\r\n        const res = response.data;\r\n        const success = res.success;\r\n\r\n        console.log(success);\r\n\r\n        if (success) {\r\n          toast.success(success, {\r\n            position: toast.POSITION.TOP_RIGHT,\r\n          });\r\n        }\r\n      })\r\n      .catch((err) => {\r\n        const error = err.response.data;\r\n        console.log(\"Error: \", error);\r\n        if (error) {\r\n          toast.error(error);\r\n        }\r\n      });\r\n  }\r\n\r\n  // Get Image to set in formInput\r\n  const getImage = (e) => {\r\n    // console.log(e.target.files[0]);\r\n    setformInput({\r\n      ...formInput,\r\n      postImage: e.target.files[0],\r\n    });\r\n    // console.log(formInput);\r\n  };\r\n\r\n  // Get Post Content to set in formInput\r\n  const getValue = (value) => {\r\n    // check do you get dynamic value here\r\n    // console.log(\"EditorValue: \" + JSON.stringify(value));\r\n    setformInput({ ...formInput, postContent: value });\r\n  };\r\n\r\n  // Get Categories to set in formInput\r\n  const getCategories = (value) => {\r\n    setformInput({ ...formInput, postCategories: value });\r\n    console.log(\"Category: \", value);\r\n  };\r\n\r\n  // Get Tags to set in formInput\r\n  const getTags = (value) => {\r\n    setformInput({ ...formInput, postTags: value });\r\n    console.log(\"Tags: \", value);\r\n  };\r\n\r\n  return (\r\n    <div className=\"px-5\">\r\n      <Helmet>\r\n        <title>Admin: Create Post</title>\r\n        <meta name=\"description\" content=\"Helmet application\" />\r\n      </Helmet>\r\n      <div className=\"card shadow\">\r\n        <div className=\"card-body\">\r\n          <div className=\"h2 p-1\">Create Post</div>\r\n          <form>\r\n            <ImageUpload\r\n              label={\"Upload Image\"}\r\n              getImage={getImage}\r\n              defaultImage={\r\n                process.env.REACT_APP_SERVER_BASE + \"No_Image_Available.jpg\"\r\n              }\r\n            />\r\n            <div className=\"mb-3\">\r\n              <label\r\n                htmlFor=\"post_title\"\r\n                className=\"col-12 ps-2 pb-1 text-black-50\"\r\n              >\r\n                Title\r\n              </label>\r\n              <div className=\"col-12\">\r\n                <input\r\n                  type=\"text\"\r\n                  className=\"form-control rounded-pill\"\r\n                  name=\"postTitle\"\r\n                  id=\"postTitle\"\r\n                  onChange={handleInput}\r\n                />\r\n              </div>\r\n            </div>\r\n            <div className=\"mb-3\">\r\n              <label\r\n                htmlFor=\"post_cat\"\r\n                className=\"col-12 ps-2 pb-1 text-black-50\"\r\n              >\r\n                Categories\r\n              </label>\r\n              <SelectCategories getCategories={getCategories} />\r\n            </div>\r\n            <div className=\"mb-3\">\r\n              <label\r\n                htmlFor=\"post_cat\"\r\n                className=\"col-12 ps-2 pb-1 text-black-50\"\r\n              >\r\n                Tags\r\n              </label>\r\n              <SelectTags getTags={getTags} />\r\n            </div>\r\n            <div className=\"mb-3\">\r\n              <label\r\n                htmlFor=\"post_des\"\r\n                className=\"col-12 ps-2 pb-1 text-black-50\"\r\n              >\r\n                Content\r\n              </label>\r\n              <div className=\"col-12\">\r\n                <Editor getValue={getValue} editorContent={\"\"} />\r\n              </div>\r\n            </div>\r\n            <div className=\"mb-5\">\r\n              <div className=\"col-sm-10\">\r\n                <button\r\n                  type=\"submit\"\r\n                  className=\"btn btn-orange\"\r\n                  onClick={handleSubmit}\r\n                >\r\n                  Submit\r\n                </button>\r\n              </div>\r\n            </div>\r\n          </form>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}