{"ast":null,"code":"import _asyncToGenerator from\"D:/Projects/Git Repo Public/React/Blog/client/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"D:/Projects/Git Repo Public/React/Blog/client/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import _regeneratorRuntime from\"D:\\\\Projects\\\\Git Repo Public\\\\React\\\\Blog\\\\client\\\\node_modules\\\\@babel\\\\runtime\\\\regenerator\\\\index.js\";import{useEffect,useState}from\"react\";import axios from\"axios\";import Cookies from\"js-cookie\";import{Helmet}from\"react-helmet-async\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export default function Dashboard(){var _useState=useState(0),_useState2=_slicedToArray(_useState,2),countCategories=_useState2[0],setCountCategories=_useState2[1];var _useState3=useState(0),_useState4=_slicedToArray(_useState3,2),countTags=_useState4[0],setCountTags=_useState4[1];var _useState5=useState(0),_useState6=_slicedToArray(_useState5,2),countPosts=_useState6[0],setCountPosts=_useState6[1];var user=JSON.parse(Cookies.get(\"user\"));var token=user.token;var config={headers:{authorization:\"Bearer \".concat(token)}};function count(res,state){var count=0;var interval=setInterval(function(){count++;switch(state){case\"category\":setCountCategories(count);break;case\"tag\":setCountTags(count);break;case\"post\":setCountPosts(count);break;default:break;}if(count===res.length){clearInterval(interval);}},200);// console.log(state);\n}function getCategories(){return _getCategories.apply(this,arguments);}function _getCategories(){_getCategories=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(){return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.next=2;return axios.post(process.env.REACT_APP_SERVER_BASE+\"showCategory\",{},config).then(/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(response){var res;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return response.data;case 2:res=_context.sent;if(res){count(res,\"category\");}case 4:case\"end\":return _context.stop();}}},_callee);}));return function(_x){return _ref.apply(this,arguments);};}()).catch(function(err){var error=err.response.data;console.log(error);});case 2:case\"end\":return _context2.stop();}}},_callee2);}));return _getCategories.apply(this,arguments);}function getTags(){return _getTags.apply(this,arguments);}function _getTags(){_getTags=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(){return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:_context3.next=2;return axios.post(process.env.REACT_APP_SERVER_BASE+\"showTag\",{},config).then(function(response){var res=response.data;if(res){count(res,\"tag\");}}).catch(function(err){var error=err.response.data;console.log(error);});case 2:case\"end\":return _context3.stop();}}},_callee3);}));return _getTags.apply(this,arguments);}function getPosts(){return _getPosts.apply(this,arguments);}function _getPosts(){_getPosts=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee4(){return _regeneratorRuntime.wrap(function _callee4$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:_context4.next=2;return axios.post(process.env.REACT_APP_SERVER_BASE+\"showPost\",{},config).then(function(response){var res=response.data;if(res.length>0){count(res,\"post\");}}).catch(function(err){var error=err.response.data;console.log(error);});case 2:case\"end\":return _context4.stop();}}},_callee4);}));return _getPosts.apply(this,arguments);}useEffect(function(){getCategories();getTags();getPosts();},[]);return/*#__PURE__*/_jsxs(\"div\",{className:\"container\",children:[/*#__PURE__*/_jsxs(Helmet,{children:[/*#__PURE__*/_jsx(\"title\",{children:\"Admin Dashboard\"}),/*#__PURE__*/_jsx(\"meta\",{name:\"description\",content:\"Admin dashboard\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"row\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"col-6\",children:/*#__PURE__*/_jsx(\"div\",{className:\"card mb-4\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"card-body\",children:[/*#__PURE__*/_jsx(\"h4\",{className:\"card-title\",children:\"Categories\"}),/*#__PURE__*/_jsx(\"p\",{className:\"card-text\",children:countCategories})]})})}),/*#__PURE__*/_jsx(\"div\",{className:\"col-6\",children:/*#__PURE__*/_jsx(\"div\",{className:\"card mb-4\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"card-body\",children:[/*#__PURE__*/_jsx(\"h4\",{className:\"card-title\",children:\"Tags\"}),/*#__PURE__*/_jsx(\"p\",{className:\"card-text\",children:countTags})]})})}),/*#__PURE__*/_jsx(\"div\",{className:\"col-12\",children:/*#__PURE__*/_jsx(\"div\",{className:\"card mb-4\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"card-body\",children:[/*#__PURE__*/_jsx(\"h4\",{className:\"card-title\",children:\"Posts\"}),/*#__PURE__*/_jsx(\"p\",{className:\"card-text\",children:countPosts})]})})})]})]});}","map":{"version":3,"names":["useEffect","useState","axios","Cookies","Helmet","Dashboard","countCategories","setCountCategories","countTags","setCountTags","countPosts","setCountPosts","user","JSON","parse","get","token","config","headers","authorization","count","res","state","interval","setInterval","length","clearInterval","getCategories","post","process","env","REACT_APP_SERVER_BASE","then","response","data","catch","err","error","console","log","getTags","getPosts"],"sources":["D:/Projects/Git Repo Public/React/Blog/client/src/pages/admin/dashboard.js"],"sourcesContent":["import { useEffect, useState } from \"react\";\r\nimport axios from \"axios\";\r\nimport Cookies from \"js-cookie\";\r\nimport { Helmet } from \"react-helmet-async\";\r\n\r\nexport default function Dashboard() {\r\n  const [countCategories, setCountCategories] = useState(0);\r\n  const [countTags, setCountTags] = useState(0);\r\n  const [countPosts, setCountPosts] = useState(0);\r\n\r\n  const user = JSON.parse(Cookies.get(\"user\"));\r\n  const token = user.token;\r\n  const config = {\r\n    headers: {\r\n      authorization: `Bearer ${token}`,\r\n    },\r\n  };\r\n\r\n  function count(res, state) {\r\n    var count = 0;\r\n    var interval = setInterval(() => {\r\n      count++;\r\n\r\n      switch (state) {\r\n        case \"category\":\r\n          setCountCategories(count);\r\n          break;\r\n\r\n        case \"tag\":\r\n          setCountTags(count);\r\n          break;\r\n\r\n        case \"post\":\r\n          setCountPosts(count);\r\n          break;\r\n\r\n        default:\r\n          break;\r\n      }\r\n\r\n      if (count === res.length) {\r\n        clearInterval(interval);\r\n      }\r\n    }, 200);\r\n\r\n    // console.log(state);\r\n  }\r\n\r\n  async function getCategories() {\r\n    await axios\r\n      .post(process.env.REACT_APP_SERVER_BASE + \"showCategory\", {}, config)\r\n      .then(async (response) => {\r\n        const res = await response.data;\r\n        if (res) {\r\n          count(res, \"category\");\r\n        }\r\n      })\r\n      .catch((err) => {\r\n        const error = err.response.data;\r\n        console.log(error);\r\n      });\r\n  }\r\n\r\n  async function getTags() {\r\n    await axios\r\n      .post(process.env.REACT_APP_SERVER_BASE + \"showTag\", {}, config)\r\n      .then((response) => {\r\n        const res = response.data;\r\n        if (res) {\r\n          count(res, \"tag\");\r\n        }\r\n      })\r\n      .catch((err) => {\r\n        const error = err.response.data;\r\n        console.log(error);\r\n      });\r\n  }\r\n\r\n  async function getPosts() {\r\n    await axios\r\n      .post(process.env.REACT_APP_SERVER_BASE + \"showPost\", {}, config)\r\n      .then((response) => {\r\n        const res = response.data;\r\n        if (res.length > 0) {\r\n          count(res, \"post\");\r\n        }\r\n      })\r\n      .catch((err) => {\r\n        const error = err.response.data;\r\n        console.log(error);\r\n      });\r\n  }\r\n\r\n  useEffect(() => {\r\n    getCategories();\r\n    getTags();\r\n    getPosts();\r\n  }, []);\r\n\r\n  return (\r\n    <div className=\"container\">\r\n      <Helmet>\r\n        <title>Admin Dashboard</title>\r\n        <meta name=\"description\" content=\"Admin dashboard\" />\r\n      </Helmet>\r\n      <div className=\"row\">\r\n        <div className=\"col-6\">\r\n          <div className=\"card mb-4\">\r\n            <div className=\"card-body\">\r\n              <h4 className=\"card-title\">Categories</h4>\r\n              <p className=\"card-text\">{countCategories}</p>\r\n            </div>\r\n          </div>\r\n        </div>\r\n\r\n        <div className=\"col-6\">\r\n          <div className=\"card mb-4\">\r\n            <div className=\"card-body\">\r\n              <h4 className=\"card-title\">Tags</h4>\r\n              <p className=\"card-text\">{countTags}</p>\r\n            </div>\r\n          </div>\r\n        </div>\r\n\r\n        <div className=\"col-12\">\r\n          <div className=\"card mb-4\">\r\n            <div className=\"card-body\">\r\n              <h4 className=\"card-title\">Posts</h4>\r\n              <p className=\"card-text\">{countPosts}</p>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}