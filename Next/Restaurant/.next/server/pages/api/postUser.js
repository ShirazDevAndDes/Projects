"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "pages/api/postUser";
exports.ids = ["pages/api/postUser"];
exports.modules = {

/***/ "axios":
/*!************************!*\
  !*** external "axios" ***!
  \************************/
/***/ ((module) => {

module.exports = require("axios");

/***/ }),

/***/ "bcrypt":
/*!*************************!*\
  !*** external "bcrypt" ***!
  \*************************/
/***/ ((module) => {

module.exports = require("bcrypt");

/***/ }),

/***/ "jsonwebtoken":
/*!*******************************!*\
  !*** external "jsonwebtoken" ***!
  \*******************************/
/***/ ((module) => {

module.exports = require("jsonwebtoken");

/***/ }),

/***/ "mongoose":
/*!***************************!*\
  !*** external "mongoose" ***!
  \***************************/
/***/ ((module) => {

module.exports = require("mongoose");

/***/ }),

/***/ "validator":
/*!****************************!*\
  !*** external "validator" ***!
  \****************************/
/***/ ((module) => {

module.exports = require("validator");

/***/ }),

/***/ "(api)/./lib/dbConnect.js":
/*!**************************!*\
  !*** ./lib/dbConnect.js ***!
  \**************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ dbConnect)\n/* harmony export */ });\n/* harmony import */ var mongoose__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! mongoose */ \"mongoose\");\n/* harmony import */ var mongoose__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(mongoose__WEBPACK_IMPORTED_MODULE_0__);\n\nconst MONGODB_URI = process.env.MONGODB_URI;\nif (!MONGODB_URI) {\n    throw new Error(\"MongoDB is not connected\");\n}\nlet cached = global.mongoose;\nif (!cached) {\n    cached = global.mongoose = {\n        conn: null,\n        promise: null\n    };\n}\nasync function dbConnect() {\n    if (cached.conn) {\n        console.log(\"DB Connected\");\n        return cached.conn;\n    }\n    if (!cached.promise) {\n        const options = {\n            bufferCommands: false\n        };\n        cached.promise = await mongoose__WEBPACK_IMPORTED_MODULE_0___default().connect(MONGODB_URI).then((mongoose1)=>{\n            return mongoose1;\n        });\n    }\n    cached.conn = await cached.process;\n    return cached.conn;\n};\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9saWIvZGJDb25uZWN0LmpzLmpzIiwibWFwcGluZ3MiOiI7Ozs7OztBQUFnQztBQUVoQyxNQUFNQyxXQUFXLEdBQUdDLE9BQU8sQ0FBQ0MsR0FBRyxDQUFDRixXQUFXO0FBRTNDLElBQUksQ0FBQ0EsV0FBVyxFQUFFO0lBQ2hCLE1BQU0sSUFBSUcsS0FBSyxDQUFDLDBCQUEwQixDQUFDLENBQUM7Q0FDN0M7QUFFRCxJQUFJQyxNQUFNLEdBQUdDLE1BQU0sQ0FBQ04sUUFBUTtBQUU1QixJQUFJLENBQUNLLE1BQU0sRUFBRTtJQUNYQSxNQUFNLEdBQUdDLE1BQU0sQ0FBQ04sUUFBUSxHQUFHO1FBQUVPLElBQUksRUFBRSxJQUFJO1FBQUVDLE9BQU8sRUFBRSxJQUFJO0tBQUUsQ0FBQztDQUMxRDtBQUVjLGVBQWVDLFNBQVMsR0FBRztJQUN4QyxJQUFJSixNQUFNLENBQUNFLElBQUksRUFBRTtRQUNmRyxPQUFPLENBQUNDLEdBQUcsQ0FBQyxjQUFjLENBQUMsQ0FBQztRQUM1QixPQUFPTixNQUFNLENBQUNFLElBQUksQ0FBQztLQUNwQjtJQUVELElBQUksQ0FBQ0YsTUFBTSxDQUFDRyxPQUFPLEVBQUU7UUFDbkIsTUFBTUksT0FBTyxHQUFHO1lBQ2RDLGNBQWMsRUFBRSxLQUFLO1NBQ3RCO1FBRURSLE1BQU0sQ0FBQ0csT0FBTyxHQUFHLE1BQU1SLHVEQUFnQixDQUFDQyxXQUFXLENBQUMsQ0FBQ2MsSUFBSSxDQUFDLENBQUNmLFNBQVEsR0FBSztZQUN0RSxPQUFPQSxTQUFRLENBQUM7U0FDakIsQ0FBQyxDQUFDO0tBQ0o7SUFFREssTUFBTSxDQUFDRSxJQUFJLEdBQUcsTUFBTUYsTUFBTSxDQUFDSCxPQUFPLENBQUM7SUFDbkMsT0FBT0csTUFBTSxDQUFDRSxJQUFJLENBQUM7Q0FDcEIiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9yZXN0YXVyYW50Ly4vbGliL2RiQ29ubmVjdC5qcz8xZDNiIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBtb25nb29zZSBmcm9tIFwibW9uZ29vc2VcIjtcclxuXHJcbmNvbnN0IE1PTkdPREJfVVJJID0gcHJvY2Vzcy5lbnYuTU9OR09EQl9VUkk7XHJcblxyXG5pZiAoIU1PTkdPREJfVVJJKSB7XHJcbiAgdGhyb3cgbmV3IEVycm9yKFwiTW9uZ29EQiBpcyBub3QgY29ubmVjdGVkXCIpO1xyXG59XHJcblxyXG5sZXQgY2FjaGVkID0gZ2xvYmFsLm1vbmdvb3NlO1xyXG5cclxuaWYgKCFjYWNoZWQpIHtcclxuICBjYWNoZWQgPSBnbG9iYWwubW9uZ29vc2UgPSB7IGNvbm46IG51bGwsIHByb21pc2U6IG51bGwgfTtcclxufVxyXG5cclxuZXhwb3J0IGRlZmF1bHQgYXN5bmMgZnVuY3Rpb24gZGJDb25uZWN0KCkge1xyXG4gIGlmIChjYWNoZWQuY29ubikge1xyXG4gICAgY29uc29sZS5sb2coXCJEQiBDb25uZWN0ZWRcIik7XHJcbiAgICByZXR1cm4gY2FjaGVkLmNvbm47XHJcbiAgfVxyXG5cclxuICBpZiAoIWNhY2hlZC5wcm9taXNlKSB7XHJcbiAgICBjb25zdCBvcHRpb25zID0ge1xyXG4gICAgICBidWZmZXJDb21tYW5kczogZmFsc2UsXHJcbiAgICB9O1xyXG5cclxuICAgIGNhY2hlZC5wcm9taXNlID0gYXdhaXQgbW9uZ29vc2UuY29ubmVjdChNT05HT0RCX1VSSSkudGhlbigobW9uZ29vc2UpID0+IHtcclxuICAgICAgcmV0dXJuIG1vbmdvb3NlO1xyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICBjYWNoZWQuY29ubiA9IGF3YWl0IGNhY2hlZC5wcm9jZXNzO1xyXG4gIHJldHVybiBjYWNoZWQuY29ubjtcclxufVxyXG4iXSwibmFtZXMiOlsibW9uZ29vc2UiLCJNT05HT0RCX1VSSSIsInByb2Nlc3MiLCJlbnYiLCJFcnJvciIsImNhY2hlZCIsImdsb2JhbCIsImNvbm4iLCJwcm9taXNlIiwiZGJDb25uZWN0IiwiY29uc29sZSIsImxvZyIsIm9wdGlvbnMiLCJidWZmZXJDb21tYW5kcyIsImNvbm5lY3QiLCJ0aGVuIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(api)/./lib/dbConnect.js\n");

/***/ }),

/***/ "(api)/./models/userInfo.js":
/*!****************************!*\
  !*** ./models/userInfo.js ***!
  \****************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var mongoose__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! mongoose */ \"mongoose\");\n/* harmony import */ var mongoose__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(mongoose__WEBPACK_IMPORTED_MODULE_0__);\n\nmongoose__WEBPACK_IMPORTED_MODULE_0___default().pluralize(false);\nconst UserSchema = new (mongoose__WEBPACK_IMPORTED_MODULE_0___default().Schema)({\n    image: {\n        type: String\n    },\n    username: {\n        type: String\n    },\n    email: {\n        type: String,\n        required: true\n    },\n    password: {\n        type: String,\n        required: true\n    },\n    address: {\n        type: String\n    },\n    role: {\n        type: String,\n        required: true\n    }\n});\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ((mongoose__WEBPACK_IMPORTED_MODULE_0___default().models.foodUsers) || mongoose__WEBPACK_IMPORTED_MODULE_0___default().model(\"foodUsers\", UserSchema));\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9tb2RlbHMvdXNlckluZm8uanMuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7O0FBQWdDO0FBRWhDQSx5REFBa0IsQ0FBQyxLQUFLLENBQUMsQ0FBQztBQUUxQixNQUFNRSxVQUFVLEdBQUcsSUFBSUYsd0RBQWUsQ0FBQztJQUNyQ0ksS0FBSyxFQUFFO1FBQ0xDLElBQUksRUFBRUMsTUFBTTtLQUNiO0lBQ0RDLFFBQVEsRUFBRTtRQUNSRixJQUFJLEVBQUVDLE1BQU07S0FDYjtJQUNERSxLQUFLLEVBQUU7UUFDTEgsSUFBSSxFQUFFQyxNQUFNO1FBQ1pHLFFBQVEsRUFBRSxJQUFJO0tBQ2Y7SUFDREMsUUFBUSxFQUFFO1FBQ1JMLElBQUksRUFBRUMsTUFBTTtRQUNaRyxRQUFRLEVBQUUsSUFBSTtLQUNmO0lBQ0RFLE9BQU8sRUFBRTtRQUNQTixJQUFJLEVBQUVDLE1BQU07S0FDYjtJQUNETSxJQUFJLEVBQUU7UUFDSlAsSUFBSSxFQUFFQyxNQUFNO1FBQ1pHLFFBQVEsRUFBRSxJQUFJO0tBQ2Y7Q0FDRixDQUFDO0FBRUYsaUVBQWVULGtFQUF5QixJQUN0Q0EscURBQWMsQ0FBQyxXQUFXLEVBQUVFLFVBQVUsQ0FBQyxFQUFDIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vcmVzdGF1cmFudC8uL21vZGVscy91c2VySW5mby5qcz8zMjk0Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBtb25nb29zZSBmcm9tIFwibW9uZ29vc2VcIjtcclxuXHJcbm1vbmdvb3NlLnBsdXJhbGl6ZShmYWxzZSk7XHJcblxyXG5jb25zdCBVc2VyU2NoZW1hID0gbmV3IG1vbmdvb3NlLlNjaGVtYSh7XHJcbiAgaW1hZ2U6IHtcclxuICAgIHR5cGU6IFN0cmluZyxcclxuICB9LFxyXG4gIHVzZXJuYW1lOiB7XHJcbiAgICB0eXBlOiBTdHJpbmcsXHJcbiAgfSxcclxuICBlbWFpbDoge1xyXG4gICAgdHlwZTogU3RyaW5nLFxyXG4gICAgcmVxdWlyZWQ6IHRydWUsXHJcbiAgfSxcclxuICBwYXNzd29yZDoge1xyXG4gICAgdHlwZTogU3RyaW5nLFxyXG4gICAgcmVxdWlyZWQ6IHRydWUsXHJcbiAgfSxcclxuICBhZGRyZXNzOiB7XHJcbiAgICB0eXBlOiBTdHJpbmcsXHJcbiAgfSxcclxuICByb2xlOiB7XHJcbiAgICB0eXBlOiBTdHJpbmcsXHJcbiAgICByZXF1aXJlZDogdHJ1ZSxcclxuICB9LFxyXG59KTtcclxuXHJcbmV4cG9ydCBkZWZhdWx0IG1vbmdvb3NlLm1vZGVscy5mb29kVXNlcnMgfHxcclxuICBtb25nb29zZS5tb2RlbChcImZvb2RVc2Vyc1wiLCBVc2VyU2NoZW1hKTtcclxuIl0sIm5hbWVzIjpbIm1vbmdvb3NlIiwicGx1cmFsaXplIiwiVXNlclNjaGVtYSIsIlNjaGVtYSIsImltYWdlIiwidHlwZSIsIlN0cmluZyIsInVzZXJuYW1lIiwiZW1haWwiLCJyZXF1aXJlZCIsInBhc3N3b3JkIiwiYWRkcmVzcyIsInJvbGUiLCJtb2RlbHMiLCJmb29kVXNlcnMiLCJtb2RlbCJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(api)/./models/userInfo.js\n");

/***/ }),

/***/ "(api)/./pages/api/postUser.js":
/*!*******************************!*\
  !*** ./pages/api/postUser.js ***!
  \*******************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ handle)\n/* harmony export */ });\n/* harmony import */ var mongoose__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! mongoose */ \"mongoose\");\n/* harmony import */ var mongoose__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(mongoose__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _lib_dbConnect__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../lib/dbConnect */ \"(api)/./lib/dbConnect.js\");\n/* harmony import */ var _models_userInfo__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../models/userInfo */ \"(api)/./models/userInfo.js\");\n/* harmony import */ var bcrypt__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! bcrypt */ \"bcrypt\");\n/* harmony import */ var bcrypt__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(bcrypt__WEBPACK_IMPORTED_MODULE_3__);\n/* harmony import */ var validator__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! validator */ \"validator\");\n/* harmony import */ var validator__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(validator__WEBPACK_IMPORTED_MODULE_4__);\n/* harmony import */ var jsonwebtoken__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! jsonwebtoken */ \"jsonwebtoken\");\n/* harmony import */ var jsonwebtoken__WEBPACK_IMPORTED_MODULE_5___default = /*#__PURE__*/__webpack_require__.n(jsonwebtoken__WEBPACK_IMPORTED_MODULE_5__);\n/* harmony import */ var axios__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! axios */ \"axios\");\n/* harmony import */ var axios__WEBPACK_IMPORTED_MODULE_6___default = /*#__PURE__*/__webpack_require__.n(axios__WEBPACK_IMPORTED_MODULE_6__);\n\n\n\n\n\n\n\nasync function handle(req, res) {\n    let successes = [];\n    let errors = [];\n    let result = null;\n    const method = await req.method;\n    // Create a JWT Token\n    function createToken(id) {\n        const maxAge = 1 * 24 * 60 * 60;\n        const token = jsonwebtoken__WEBPACK_IMPORTED_MODULE_5___default().sign({\n            id\n        }, \"secret\", {\n            expiresIn: \"1d\"\n        });\n        // console.log(token);\n        return token;\n    }\n    // Create a JWT Refresh Token\n    function createRefreshToken(id) {\n        const maxAge = 1 * 24 * 60 * 60;\n        const token = jsonwebtoken__WEBPACK_IMPORTED_MODULE_5___default().sign({\n            id\n        }, \"refreshSecret\", {\n            expiresIn: \"1d\"\n        });\n        // console.log(token);\n        return token;\n    }\n    if (method === \"POST\") {\n        const body = await req.body;\n        const operation = body.operation;\n        const operationType = body.operationType;\n        await (0,_lib_dbConnect__WEBPACK_IMPORTED_MODULE_1__[\"default\"])();\n        // If it is a (Create) request\n        if (operation === \"create\") {\n            // Create the users account\n            if (operationType === \"signup\") {\n                const email = body.email;\n                const password = body.password;\n                let hashPass = false;\n                let createAccount = false;\n                let emailVal = false;\n                // Check if email and password is submitted\n                if (email.length < 0 && password.length < 0) {\n                    // Validate E-mail\n                    if (validator__WEBPACK_IMPORTED_MODULE_4___default().isEmail(email)) {\n                        emailVal = true;\n                        // Check if the email has already been used\n                        const emailCheck = await _models_userInfo__WEBPACK_IMPORTED_MODULE_2__[\"default\"].findOne({\n                            email\n                        });\n                        // if email exists send error\n                        if (emailCheck) {\n                            errors.push(\"You already have an account\");\n                        } else {\n                            // hash the password\n                            hashPass = bcrypt__WEBPACK_IMPORTED_MODULE_3___default().hashSync(password, 10);\n                            // console.log(hashPass);\n                            // If the password was hashed submit the user data to the database\n                            if (hashPass) {\n                                createAccount = _models_userInfo__WEBPACK_IMPORTED_MODULE_2__[\"default\"].create({\n                                    email,\n                                    password: hashPass,\n                                    role: \"user\"\n                                });\n                                // if account was created then send success message\n                                if (createAccount) {\n                                    successes.push(\"Your account has been created\");\n                                } else {\n                                    // if account was not created then send error message\n                                    errors.push(\"Your account was not created, something went wrong\");\n                                }\n                            } else {\n                                // if password was not hashed then send error message\n                                errors.push(\"Something went wrong while securing your password please try again\");\n                            }\n                        }\n                    } else {\n                        // if E-mail submitted was not a valid email send error message\n                        errors.push(\"Your E-mail is not Valid\");\n                    }\n                } else {\n                    // if either email or password field was empty send error message\n                    errors.push(\"Please fill in your E-mail and Password\");\n                }\n            }\n        }\n        // If it is a (Read) request\n        if (operation === \"read\") {\n            // If operation type is set to (getAllUsers)\n            if (operationType === \"getAllUsers\") {\n                // Get all users name with the role of user\n                const user = await _models_userInfo__WEBPACK_IMPORTED_MODULE_2__[\"default\"].find({\n                    role: \"user\"\n                }).select(\"-email -address -role -__v -password\");\n                if (user) {\n                    // If users found then send the user data and success message\n                    successes.push(\"Users Found\");\n                    result = user;\n                } else {\n                    // If users not found then send error message\n                    errors.push(\"Users not found\");\n                }\n            }\n            // If operation type is set to (userInfo)\n            if (operationType === \"userInfo\") {\n                const email = body.email;\n                // get all users by there email\n                const user = await _models_userInfo__WEBPACK_IMPORTED_MODULE_2__[\"default\"].findOne({\n                    email\n                }).select(\"-__v -password\");\n                if (user) {\n                    // If users found then send the user data and success message\n                    successes.push(\"User Found\");\n                    result = user;\n                } else {\n                    // If users not found then send error message\n                    errors.push(\"User not found\");\n                }\n            }\n            // If operation type is set to (userLogin)\n            if (operationType === \"userLogin\") {\n                const email = body.email;\n                const password = body.password;\n                const role = body.role;\n                let userData = null;\n                let user = null;\n                let emailVerified = false;\n                let passVerified = false;\n                let roleVerified = false;\n                // Check if E-mail field is empty\n                if (email.length <= 0) {\n                    errors.push(\"Email is empty\");\n                }\n                // Check if password field is empty\n                if (password.length <= 0) {\n                    errors.push(\"Password is empty\");\n                }\n                // if both E-mail and Password field is not empty then continue\n                if (email.length > 0 && password.length > 0) {\n                    // Check if user exists\n                    userData = await _models_userInfo__WEBPACK_IMPORTED_MODULE_2__[\"default\"].findOne({\n                        email\n                    });\n                    if (userData) {\n                        // Set to true to indicate email is verified\n                        emailVerified = true;\n                        // check if sent role and user's role are the same\n                        if (userData.role === role) {\n                            // Set to true to indicate user role is verified\n                            roleVerified = true;\n                            if (emailVerified) {\n                                // hash the password\n                                const hashPass = userData.password;\n                                // Compare with sent password\n                                const compare_pass = await bcrypt__WEBPACK_IMPORTED_MODULE_3___default().compare(password, hashPass);\n                                if (compare_pass) {\n                                    // if password comparison is true then set to true\n                                    passVerified = true;\n                                } else {\n                                    // if password comparison is false then set error\n                                    errors.push(\"password is not correct\");\n                                }\n                            } else {\n                                // if E-mail is not verified sent error\n                                errors.push(\"Email is not Correct\");\n                            }\n                        } else {\n                            // if user role is not verified sent error\n                            errors.push(\"You are not the correct user\");\n                        }\n                    } else {\n                        // if user E-mail does not exists then sent error\n                        errors.push(\"Your Email is invalid\");\n                    }\n                }\n                // If both E-mail and password are verified then continue\n                if (emailVerified && passVerified) {\n                    const email = await userData.email;\n                    const token = createToken(\"1\");\n                    const refreshToken = createRefreshToken(1);\n                    // Set user data to send to credentials authentication process\n                    user = {\n                        email,\n                        data: {\n                            dada: \"more Data\",\n                            token,\n                            refreshToken\n                        }\n                    };\n                    result = user;\n                } else {\n                    // If either E-mail or password are not verified then set error\n                    errors.push(\"Something went wrong \\n Please Check Your E-mail and Password\");\n                }\n            }\n        }\n        // If it is a (Update) request\n        if (operation === \"update\") {\n            // If operation type is set to (updateUser)\n            if (operationType === \"updateUser\") {\n                const userID = body.userID;\n                const image = body.image;\n                const username = body.username;\n                const email = body.email;\n                const address = body.address;\n                const password = body.password;\n                const confirmPassword = body.confirmPassword;\n                let userData;\n                let passVerified = false;\n                // check if password was sent or not\n                if (password.length > 0) {\n                    // check if password and confirm password field match\n                    if (password === confirmPassword) {\n                        passVerified = true;\n                    } else {\n                        // check if password and confirm password field match\n                        errors.push(\"Your password and correct password do not match\");\n                    }\n                }\n                // check if image was sent\n                if (image.length > 0) {\n                    const uploadImage = await _models_userInfo__WEBPACK_IMPORTED_MODULE_2__[\"default\"].findByIdAndUpdate(userID, {\n                        image\n                    });\n                }\n                // if password was sent\n                if (passVerified) {\n                    const hashPassword = bcrypt__WEBPACK_IMPORTED_MODULE_3___default().hashSync(password, 10);\n                    // Update user data with password\n                    userData = await _models_userInfo__WEBPACK_IMPORTED_MODULE_2__[\"default\"].findByIdAndUpdate(userID, {\n                        username,\n                        email,\n                        address,\n                        password: hashPassword\n                    });\n                } else {\n                    // Update user data without password\n                    userData = await _models_userInfo__WEBPACK_IMPORTED_MODULE_2__[\"default\"].findByIdAndUpdate(userID, {\n                        username,\n                        email,\n                        address\n                    }, {\n                        new: true\n                    });\n                }\n                // if user data was updated then\n                if (userData) {\n                    // set success message and set result to sent back to user\n                    successes.push(\"Your data has been updated\");\n                    result = userData;\n                } else {\n                    // set error message if user data was not updated\n                    errors.push(\"Your data could not be updated\");\n                }\n            }\n        }\n        // If it is a (Delete) request\n        if (operation === \"delete\") {}\n        // Send the response\n        if (errors.length === 0) {\n            res.status(200).send({\n                successes,\n                result\n            });\n        } else {\n            res.status(400).send(errors);\n        }\n    }\n};\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9wYWdlcy9hcGkvcG9zdFVzZXIuanMuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7OztBQUFnQztBQUNZO0FBQ0M7QUFFakI7QUFDTTtBQUNIO0FBQ0w7QUFFWCxlQUFlTyxNQUFNLENBQUNDLEdBQUcsRUFBRUMsR0FBRyxFQUFFO0lBQzdDLElBQUlDLFNBQVMsR0FBRyxFQUFFO0lBQ2xCLElBQUlDLE1BQU0sR0FBRyxFQUFFO0lBQ2YsSUFBSUMsTUFBTSxHQUFHLElBQUk7SUFFakIsTUFBTUMsTUFBTSxHQUFHLE1BQU1MLEdBQUcsQ0FBQ0ssTUFBTTtJQUUvQixxQkFBcUI7SUFDckIsU0FBU0MsV0FBVyxDQUFDQyxFQUFFLEVBQUU7UUFDdkIsTUFBTUMsTUFBTSxHQUFHLENBQUMsR0FBRyxFQUFFLEdBQUcsRUFBRSxHQUFHLEVBQUU7UUFDL0IsTUFBTUMsS0FBSyxHQUFHWix3REFBUSxDQUFDO1lBQUVVLEVBQUU7U0FBRSxFQUFFLFFBQVEsRUFBRTtZQUN2Q0ksU0FBUyxFQUFFLElBQUk7U0FDaEIsQ0FBQztRQUNGLHNCQUFzQjtRQUN0QixPQUFPRixLQUFLLENBQUM7S0FDZDtJQUVELDZCQUE2QjtJQUM3QixTQUFTRyxrQkFBa0IsQ0FBQ0wsRUFBRSxFQUFFO1FBQzlCLE1BQU1DLE1BQU0sR0FBRyxDQUFDLEdBQUcsRUFBRSxHQUFHLEVBQUUsR0FBRyxFQUFFO1FBQy9CLE1BQU1DLEtBQUssR0FBR1osd0RBQVEsQ0FBQztZQUFFVSxFQUFFO1NBQUUsRUFBRSxlQUFlLEVBQUU7WUFDOUNJLFNBQVMsRUFBRSxJQUFJO1NBQ2hCLENBQUM7UUFDRixzQkFBc0I7UUFDdEIsT0FBT0YsS0FBSyxDQUFDO0tBQ2Q7SUFFRCxJQUFJSixNQUFNLEtBQUssTUFBTSxFQUFFO1FBQ3JCLE1BQU1RLElBQUksR0FBRyxNQUFNYixHQUFHLENBQUNhLElBQUk7UUFDM0IsTUFBTUMsU0FBUyxHQUFHRCxJQUFJLENBQUNDLFNBQVM7UUFDaEMsTUFBTUMsYUFBYSxHQUFHRixJQUFJLENBQUNFLGFBQWE7UUFFeEMsTUFBTXRCLDBEQUFTLEVBQUUsQ0FBQztRQUVsQiw4QkFBOEI7UUFDOUIsSUFBSXFCLFNBQVMsS0FBSyxRQUFRLEVBQUU7WUFDMUIsMkJBQTJCO1lBQzNCLElBQUlDLGFBQWEsS0FBSyxRQUFRLEVBQUU7Z0JBQzlCLE1BQU1DLEtBQUssR0FBR0gsSUFBSSxDQUFDRyxLQUFLO2dCQUN4QixNQUFNQyxRQUFRLEdBQUdKLElBQUksQ0FBQ0ksUUFBUTtnQkFFOUIsSUFBSUMsUUFBUSxHQUFHLEtBQUs7Z0JBQ3BCLElBQUlDLGFBQWEsR0FBRyxLQUFLO2dCQUN6QixJQUFJQyxRQUFRLEdBQUcsS0FBSztnQkFFcEIsMkNBQTJDO2dCQUMzQyxJQUFJSixLQUFLLENBQUNLLE1BQU0sR0FBRyxDQUFDLElBQUlKLFFBQVEsQ0FBQ0ksTUFBTSxHQUFHLENBQUMsRUFBRTtvQkFDM0Msa0JBQWtCO29CQUNsQixJQUFJekIsd0RBQWlCLENBQUNvQixLQUFLLENBQUMsRUFBRTt3QkFDNUJJLFFBQVEsR0FBRyxJQUFJLENBQUM7d0JBRWhCLDJDQUEyQzt3QkFDM0MsTUFBTUcsVUFBVSxHQUFHLE1BQU03QixnRUFBZ0IsQ0FBQzs0QkFBRXNCLEtBQUs7eUJBQUUsQ0FBQzt3QkFFcEQsNkJBQTZCO3dCQUM3QixJQUFJTyxVQUFVLEVBQUU7NEJBQ2RwQixNQUFNLENBQUNzQixJQUFJLENBQUMsNkJBQTZCLENBQUMsQ0FBQzt5QkFDNUMsTUFBTTs0QkFDTCxvQkFBb0I7NEJBQ3BCUCxRQUFRLEdBQUd2QixzREFBZSxDQUFDc0IsUUFBUSxFQUFFLEVBQUUsQ0FBQyxDQUFDOzRCQUN6Qyx5QkFBeUI7NEJBRXpCLGtFQUFrRTs0QkFDbEUsSUFBSUMsUUFBUSxFQUFFO2dDQUNaQyxhQUFhLEdBQUd6QiwrREFBZSxDQUFDO29DQUM5QnNCLEtBQUs7b0NBQ0xDLFFBQVEsRUFBRUMsUUFBUTtvQ0FDbEJVLElBQUksRUFBRSxNQUFNO2lDQUNiLENBQUMsQ0FBQztnQ0FFSCxtREFBbUQ7Z0NBQ25ELElBQUlULGFBQWEsRUFBRTtvQ0FDakJqQixTQUFTLENBQUN1QixJQUFJLENBQUMsK0JBQStCLENBQUMsQ0FBQztpQ0FDakQsTUFBTTtvQ0FDTCxxREFBcUQ7b0NBQ3JEdEIsTUFBTSxDQUFDc0IsSUFBSSxDQUNULG9EQUFvRCxDQUNyRCxDQUFDO2lDQUNIOzZCQUNGLE1BQU07Z0NBQ0wscURBQXFEO2dDQUNyRHRCLE1BQU0sQ0FBQ3NCLElBQUksQ0FDVCxvRUFBb0UsQ0FDckUsQ0FBQzs2QkFDSDt5QkFDRjtxQkFDRixNQUFNO3dCQUNMLCtEQUErRDt3QkFDL0R0QixNQUFNLENBQUNzQixJQUFJLENBQUMsMEJBQTBCLENBQUMsQ0FBQztxQkFDekM7aUJBQ0YsTUFBTTtvQkFDTCxpRUFBaUU7b0JBQ2pFdEIsTUFBTSxDQUFDc0IsSUFBSSxDQUFDLHlDQUF5QyxDQUFDLENBQUM7aUJBQ3hEO2FBQ0Y7U0FDRjtRQUVELDRCQUE0QjtRQUM1QixJQUFJWCxTQUFTLEtBQUssTUFBTSxFQUFFO1lBQ3hCLDRDQUE0QztZQUM1QyxJQUFJQyxhQUFhLEtBQUssYUFBYSxFQUFFO2dCQUNuQywyQ0FBMkM7Z0JBQzNDLE1BQU1jLElBQUksR0FBRyxNQUFNbkMsNkRBQ1osQ0FBQztvQkFBRWtDLElBQUksRUFBRSxNQUFNO2lCQUFFLENBQUMsQ0FDdEJHLE1BQU0sQ0FBQyxzQ0FBc0MsQ0FBQztnQkFFakQsSUFBSUYsSUFBSSxFQUFFO29CQUNSLDZEQUE2RDtvQkFDN0QzQixTQUFTLENBQUN1QixJQUFJLENBQUMsYUFBYSxDQUFDLENBQUM7b0JBQzlCckIsTUFBTSxHQUFHeUIsSUFBSSxDQUFDO2lCQUNmLE1BQU07b0JBQ0wsNkNBQTZDO29CQUM3QzFCLE1BQU0sQ0FBQ3NCLElBQUksQ0FBQyxpQkFBaUIsQ0FBQyxDQUFDO2lCQUNoQzthQUNGO1lBRUQseUNBQXlDO1lBQ3pDLElBQUlWLGFBQWEsS0FBSyxVQUFVLEVBQUU7Z0JBQ2hDLE1BQU1DLEtBQUssR0FBR0gsSUFBSSxDQUFDRyxLQUFLO2dCQUV4QiwrQkFBK0I7Z0JBQy9CLE1BQU1hLElBQUksR0FBRyxNQUFNbkMsZ0VBQWdCLENBQUM7b0JBQUVzQixLQUFLO2lCQUFFLENBQUMsQ0FBQ2UsTUFBTSxDQUFDLGdCQUFnQixDQUFDO2dCQUV2RSxJQUFJRixJQUFJLEVBQUU7b0JBQ1IsNkRBQTZEO29CQUM3RDNCLFNBQVMsQ0FBQ3VCLElBQUksQ0FBQyxZQUFZLENBQUMsQ0FBQztvQkFDN0JyQixNQUFNLEdBQUd5QixJQUFJLENBQUM7aUJBQ2YsTUFBTTtvQkFDTCw2Q0FBNkM7b0JBQzdDMUIsTUFBTSxDQUFDc0IsSUFBSSxDQUFDLGdCQUFnQixDQUFDLENBQUM7aUJBQy9CO2FBQ0Y7WUFFRCwwQ0FBMEM7WUFDMUMsSUFBSVYsYUFBYSxLQUFLLFdBQVcsRUFBRTtnQkFDakMsTUFBTUMsS0FBSyxHQUFHSCxJQUFJLENBQUNHLEtBQUs7Z0JBQ3hCLE1BQU1DLFFBQVEsR0FBR0osSUFBSSxDQUFDSSxRQUFRO2dCQUM5QixNQUFNVyxJQUFJLEdBQUdmLElBQUksQ0FBQ2UsSUFBSTtnQkFDdEIsSUFBSUksUUFBUSxHQUFHLElBQUk7Z0JBQ25CLElBQUlILElBQUksR0FBRyxJQUFJO2dCQUVmLElBQUlJLGFBQWEsR0FBRyxLQUFLO2dCQUN6QixJQUFJQyxZQUFZLEdBQUcsS0FBSztnQkFDeEIsSUFBSUMsWUFBWSxHQUFHLEtBQUs7Z0JBRXhCLGlDQUFpQztnQkFDakMsSUFBSW5CLEtBQUssQ0FBQ0ssTUFBTSxJQUFJLENBQUMsRUFBRTtvQkFDckJsQixNQUFNLENBQUNzQixJQUFJLENBQUMsZ0JBQWdCLENBQUMsQ0FBQztpQkFDL0I7Z0JBRUQsbUNBQW1DO2dCQUNuQyxJQUFJUixRQUFRLENBQUNJLE1BQU0sSUFBSSxDQUFDLEVBQUU7b0JBQ3hCbEIsTUFBTSxDQUFDc0IsSUFBSSxDQUFDLG1CQUFtQixDQUFDLENBQUM7aUJBQ2xDO2dCQUVELCtEQUErRDtnQkFDL0QsSUFBSVQsS0FBSyxDQUFDSyxNQUFNLEdBQUcsQ0FBQyxJQUFJSixRQUFRLENBQUNJLE1BQU0sR0FBRyxDQUFDLEVBQUU7b0JBQzNDLHVCQUF1QjtvQkFDdkJXLFFBQVEsR0FBRyxNQUFNdEMsZ0VBQWdCLENBQUM7d0JBQUVzQixLQUFLO3FCQUFFLENBQUMsQ0FBQztvQkFFN0MsSUFBSWdCLFFBQVEsRUFBRTt3QkFDWiw0Q0FBNEM7d0JBQzVDQyxhQUFhLEdBQUcsSUFBSSxDQUFDO3dCQUVyQixrREFBa0Q7d0JBQ2xELElBQUlELFFBQVEsQ0FBQ0osSUFBSSxLQUFLQSxJQUFJLEVBQUU7NEJBQzFCLGdEQUFnRDs0QkFDaERPLFlBQVksR0FBRyxJQUFJLENBQUM7NEJBRXBCLElBQUlGLGFBQWEsRUFBRTtnQ0FDakIsb0JBQW9CO2dDQUNwQixNQUFNZixRQUFRLEdBQUdjLFFBQVEsQ0FBQ2YsUUFBUTtnQ0FFbEMsNkJBQTZCO2dDQUM3QixNQUFNbUIsWUFBWSxHQUFHLE1BQU16QyxxREFBYyxDQUFDc0IsUUFBUSxFQUFFQyxRQUFRLENBQUM7Z0NBRTdELElBQUlrQixZQUFZLEVBQUU7b0NBQ2hCLGtEQUFrRDtvQ0FDbERGLFlBQVksR0FBRyxJQUFJLENBQUM7aUNBQ3JCLE1BQU07b0NBQ0wsaURBQWlEO29DQUNqRC9CLE1BQU0sQ0FBQ3NCLElBQUksQ0FBQyx5QkFBeUIsQ0FBQyxDQUFDO2lDQUN4Qzs2QkFDRixNQUFNO2dDQUNMLHVDQUF1QztnQ0FDdkN0QixNQUFNLENBQUNzQixJQUFJLENBQUMsc0JBQXNCLENBQUMsQ0FBQzs2QkFDckM7eUJBQ0YsTUFBTTs0QkFDTCwwQ0FBMEM7NEJBQzFDdEIsTUFBTSxDQUFDc0IsSUFBSSxDQUFDLDhCQUE4QixDQUFDLENBQUM7eUJBQzdDO3FCQUNGLE1BQU07d0JBQ0wsaURBQWlEO3dCQUNqRHRCLE1BQU0sQ0FBQ3NCLElBQUksQ0FBQyx1QkFBdUIsQ0FBQyxDQUFDO3FCQUN0QztpQkFDRjtnQkFFRCx5REFBeUQ7Z0JBQ3pELElBQUlRLGFBQWEsSUFBSUMsWUFBWSxFQUFFO29CQUNqQyxNQUFNbEIsS0FBSyxHQUFHLE1BQU1nQixRQUFRLENBQUNoQixLQUFLO29CQUNsQyxNQUFNUCxLQUFLLEdBQUdILFdBQVcsQ0FBQyxHQUFHLENBQUM7b0JBQzlCLE1BQU1nQyxZQUFZLEdBQUcxQixrQkFBa0IsQ0FBQyxDQUFDLENBQUM7b0JBRTFDLDhEQUE4RDtvQkFDOURpQixJQUFJLEdBQUc7d0JBQ0xiLEtBQUs7d0JBQ0x1QixJQUFJLEVBQUU7NEJBQ0pDLElBQUksRUFBRSxXQUFXOzRCQUNqQi9CLEtBQUs7NEJBQ0w2QixZQUFZO3lCQUNiO3FCQUNGLENBQUM7b0JBRUZsQyxNQUFNLEdBQUd5QixJQUFJLENBQUM7aUJBQ2YsTUFBTTtvQkFDTCwrREFBK0Q7b0JBQy9EMUIsTUFBTSxDQUFDc0IsSUFBSSxDQUNULCtEQUErRCxDQUNoRSxDQUFDO2lCQUNIO2FBQ0Y7U0FDRjtRQUVELDhCQUE4QjtRQUM5QixJQUFJWCxTQUFTLEtBQUssUUFBUSxFQUFFO1lBQzFCLDJDQUEyQztZQUMzQyxJQUFJQyxhQUFhLEtBQUssWUFBWSxFQUFFO2dCQUNsQyxNQUFNMEIsTUFBTSxHQUFHNUIsSUFBSSxDQUFDNEIsTUFBTTtnQkFDMUIsTUFBTUMsS0FBSyxHQUFHN0IsSUFBSSxDQUFDNkIsS0FBSztnQkFDeEIsTUFBTUMsUUFBUSxHQUFHOUIsSUFBSSxDQUFDOEIsUUFBUTtnQkFDOUIsTUFBTTNCLEtBQUssR0FBR0gsSUFBSSxDQUFDRyxLQUFLO2dCQUN4QixNQUFNNEIsT0FBTyxHQUFHL0IsSUFBSSxDQUFDK0IsT0FBTztnQkFDNUIsTUFBTTNCLFFBQVEsR0FBR0osSUFBSSxDQUFDSSxRQUFRO2dCQUM5QixNQUFNNEIsZUFBZSxHQUFHaEMsSUFBSSxDQUFDZ0MsZUFBZTtnQkFFNUMsSUFBSWIsUUFBUTtnQkFDWixJQUFJRSxZQUFZLEdBQUcsS0FBSztnQkFFeEIsb0NBQW9DO2dCQUNwQyxJQUFJakIsUUFBUSxDQUFDSSxNQUFNLEdBQUcsQ0FBQyxFQUFFO29CQUN2QixxREFBcUQ7b0JBQ3JELElBQUlKLFFBQVEsS0FBSzRCLGVBQWUsRUFBRTt3QkFDaENYLFlBQVksR0FBRyxJQUFJLENBQUM7cUJBQ3JCLE1BQU07d0JBQ0wscURBQXFEO3dCQUNyRC9CLE1BQU0sQ0FBQ3NCLElBQUksQ0FBQyxpREFBaUQsQ0FBQyxDQUFDO3FCQUNoRTtpQkFDRjtnQkFFRCwwQkFBMEI7Z0JBQzFCLElBQUlpQixLQUFLLENBQUNyQixNQUFNLEdBQUcsQ0FBQyxFQUFFO29CQUNwQixNQUFNeUIsV0FBVyxHQUFHLE1BQU1wRCwwRUFBMEIsQ0FBQytDLE1BQU0sRUFBRTt3QkFDM0RDLEtBQUs7cUJBQ04sQ0FBQztpQkFDSDtnQkFFRCx1QkFBdUI7Z0JBQ3ZCLElBQUlSLFlBQVksRUFBRTtvQkFDaEIsTUFBTWMsWUFBWSxHQUFHckQsc0RBQWUsQ0FBQ3NCLFFBQVEsRUFBRSxFQUFFLENBQUM7b0JBRWxELGlDQUFpQztvQkFDakNlLFFBQVEsR0FBRyxNQUFNdEMsMEVBQTBCLENBQUMrQyxNQUFNLEVBQUU7d0JBQ2xERSxRQUFRO3dCQUNSM0IsS0FBSzt3QkFDTDRCLE9BQU87d0JBQ1AzQixRQUFRLEVBQUUrQixZQUFZO3FCQUN2QixDQUFDLENBQUM7aUJBQ0osTUFBTTtvQkFDTCxvQ0FBb0M7b0JBQ3BDaEIsUUFBUSxHQUFHLE1BQU10QywwRUFBMEIsQ0FDekMrQyxNQUFNLEVBQ047d0JBQ0VFLFFBQVE7d0JBQ1IzQixLQUFLO3dCQUNMNEIsT0FBTztxQkFDUixFQUNEO3dCQUNFSyxHQUFHLEVBQUUsSUFBSTtxQkFDVixDQUNGLENBQUM7aUJBQ0g7Z0JBRUQsZ0NBQWdDO2dCQUNoQyxJQUFJakIsUUFBUSxFQUFFO29CQUNaLDBEQUEwRDtvQkFDMUQ5QixTQUFTLENBQUN1QixJQUFJLENBQUMsNEJBQTRCLENBQUMsQ0FBQztvQkFDN0NyQixNQUFNLEdBQUc0QixRQUFRLENBQUM7aUJBQ25CLE1BQU07b0JBQ0wsaURBQWlEO29CQUNqRDdCLE1BQU0sQ0FBQ3NCLElBQUksQ0FBQyxnQ0FBZ0MsQ0FBQyxDQUFDO2lCQUMvQzthQUNGO1NBQ0Y7UUFFRCw4QkFBOEI7UUFDOUIsSUFBSVgsU0FBUyxLQUFLLFFBQVEsRUFBRSxFQUMzQjtRQUVELG9CQUFvQjtRQUNwQixJQUFJWCxNQUFNLENBQUNrQixNQUFNLEtBQUssQ0FBQyxFQUFFO1lBQ3ZCcEIsR0FBRyxDQUFDaUQsTUFBTSxDQUFDLEdBQUcsQ0FBQyxDQUFDQyxJQUFJLENBQUM7Z0JBQUVqRCxTQUFTO2dCQUFFRSxNQUFNO2FBQUUsQ0FBQyxDQUFDO1NBQzdDLE1BQU07WUFDTEgsR0FBRyxDQUFDaUQsTUFBTSxDQUFDLEdBQUcsQ0FBQyxDQUFDQyxJQUFJLENBQUNoRCxNQUFNLENBQUMsQ0FBQztTQUM5QjtLQUNGO0NBQ0YiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9yZXN0YXVyYW50Ly4vcGFnZXMvYXBpL3Bvc3RVc2VyLmpzPzlhYTkiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IG1vbmdvb3NlIGZyb20gXCJtb25nb29zZVwiO1xyXG5pbXBvcnQgZGJDb25uZWN0IGZyb20gXCIuLi8uLi9saWIvZGJDb25uZWN0XCI7XHJcbmltcG9ydCB1c2VySW5mbyBmcm9tIFwiLi4vLi4vbW9kZWxzL3VzZXJJbmZvXCI7XHJcblxyXG5pbXBvcnQgYmNyeXB0IGZyb20gXCJiY3J5cHRcIjtcclxuaW1wb3J0IHZhbGlkYXRvciBmcm9tIFwidmFsaWRhdG9yXCI7XHJcbmltcG9ydCBqd3QgZnJvbSBcImpzb253ZWJ0b2tlblwiO1xyXG5pbXBvcnQgYXhpb3MgZnJvbSBcImF4aW9zXCI7XHJcblxyXG5leHBvcnQgZGVmYXVsdCBhc3luYyBmdW5jdGlvbiBoYW5kbGUocmVxLCByZXMpIHtcclxuICBsZXQgc3VjY2Vzc2VzID0gW107XHJcbiAgbGV0IGVycm9ycyA9IFtdO1xyXG4gIGxldCByZXN1bHQgPSBudWxsO1xyXG5cclxuICBjb25zdCBtZXRob2QgPSBhd2FpdCByZXEubWV0aG9kO1xyXG5cclxuICAvLyBDcmVhdGUgYSBKV1QgVG9rZW5cclxuICBmdW5jdGlvbiBjcmVhdGVUb2tlbihpZCkge1xyXG4gICAgY29uc3QgbWF4QWdlID0gMSAqIDI0ICogNjAgKiA2MDtcclxuICAgIGNvbnN0IHRva2VuID0gand0LnNpZ24oeyBpZCB9LCBcInNlY3JldFwiLCB7XHJcbiAgICAgIGV4cGlyZXNJbjogXCIxZFwiLFxyXG4gICAgfSk7XHJcbiAgICAvLyBjb25zb2xlLmxvZyh0b2tlbik7XHJcbiAgICByZXR1cm4gdG9rZW47XHJcbiAgfVxyXG5cclxuICAvLyBDcmVhdGUgYSBKV1QgUmVmcmVzaCBUb2tlblxyXG4gIGZ1bmN0aW9uIGNyZWF0ZVJlZnJlc2hUb2tlbihpZCkge1xyXG4gICAgY29uc3QgbWF4QWdlID0gMSAqIDI0ICogNjAgKiA2MDtcclxuICAgIGNvbnN0IHRva2VuID0gand0LnNpZ24oeyBpZCB9LCBcInJlZnJlc2hTZWNyZXRcIiwge1xyXG4gICAgICBleHBpcmVzSW46IFwiMWRcIixcclxuICAgIH0pO1xyXG4gICAgLy8gY29uc29sZS5sb2codG9rZW4pO1xyXG4gICAgcmV0dXJuIHRva2VuO1xyXG4gIH1cclxuXHJcbiAgaWYgKG1ldGhvZCA9PT0gXCJQT1NUXCIpIHtcclxuICAgIGNvbnN0IGJvZHkgPSBhd2FpdCByZXEuYm9keTtcclxuICAgIGNvbnN0IG9wZXJhdGlvbiA9IGJvZHkub3BlcmF0aW9uO1xyXG4gICAgY29uc3Qgb3BlcmF0aW9uVHlwZSA9IGJvZHkub3BlcmF0aW9uVHlwZTtcclxuXHJcbiAgICBhd2FpdCBkYkNvbm5lY3QoKTtcclxuXHJcbiAgICAvLyBJZiBpdCBpcyBhIChDcmVhdGUpIHJlcXVlc3RcclxuICAgIGlmIChvcGVyYXRpb24gPT09IFwiY3JlYXRlXCIpIHtcclxuICAgICAgLy8gQ3JlYXRlIHRoZSB1c2VycyBhY2NvdW50XHJcbiAgICAgIGlmIChvcGVyYXRpb25UeXBlID09PSBcInNpZ251cFwiKSB7XHJcbiAgICAgICAgY29uc3QgZW1haWwgPSBib2R5LmVtYWlsO1xyXG4gICAgICAgIGNvbnN0IHBhc3N3b3JkID0gYm9keS5wYXNzd29yZDtcclxuXHJcbiAgICAgICAgbGV0IGhhc2hQYXNzID0gZmFsc2U7XHJcbiAgICAgICAgbGV0IGNyZWF0ZUFjY291bnQgPSBmYWxzZTtcclxuICAgICAgICBsZXQgZW1haWxWYWwgPSBmYWxzZTtcclxuXHJcbiAgICAgICAgLy8gQ2hlY2sgaWYgZW1haWwgYW5kIHBhc3N3b3JkIGlzIHN1Ym1pdHRlZFxyXG4gICAgICAgIGlmIChlbWFpbC5sZW5ndGggPCAwICYmIHBhc3N3b3JkLmxlbmd0aCA8IDApIHtcclxuICAgICAgICAgIC8vIFZhbGlkYXRlIEUtbWFpbFxyXG4gICAgICAgICAgaWYgKHZhbGlkYXRvci5pc0VtYWlsKGVtYWlsKSkge1xyXG4gICAgICAgICAgICBlbWFpbFZhbCA9IHRydWU7XHJcblxyXG4gICAgICAgICAgICAvLyBDaGVjayBpZiB0aGUgZW1haWwgaGFzIGFscmVhZHkgYmVlbiB1c2VkXHJcbiAgICAgICAgICAgIGNvbnN0IGVtYWlsQ2hlY2sgPSBhd2FpdCB1c2VySW5mby5maW5kT25lKHsgZW1haWwgfSk7XHJcblxyXG4gICAgICAgICAgICAvLyBpZiBlbWFpbCBleGlzdHMgc2VuZCBlcnJvclxyXG4gICAgICAgICAgICBpZiAoZW1haWxDaGVjaykge1xyXG4gICAgICAgICAgICAgIGVycm9ycy5wdXNoKFwiWW91IGFscmVhZHkgaGF2ZSBhbiBhY2NvdW50XCIpO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgIC8vIGhhc2ggdGhlIHBhc3N3b3JkXHJcbiAgICAgICAgICAgICAgaGFzaFBhc3MgPSBiY3J5cHQuaGFzaFN5bmMocGFzc3dvcmQsIDEwKTtcclxuICAgICAgICAgICAgICAvLyBjb25zb2xlLmxvZyhoYXNoUGFzcyk7XHJcblxyXG4gICAgICAgICAgICAgIC8vIElmIHRoZSBwYXNzd29yZCB3YXMgaGFzaGVkIHN1Ym1pdCB0aGUgdXNlciBkYXRhIHRvIHRoZSBkYXRhYmFzZVxyXG4gICAgICAgICAgICAgIGlmIChoYXNoUGFzcykge1xyXG4gICAgICAgICAgICAgICAgY3JlYXRlQWNjb3VudCA9IHVzZXJJbmZvLmNyZWF0ZSh7XHJcbiAgICAgICAgICAgICAgICAgIGVtYWlsLFxyXG4gICAgICAgICAgICAgICAgICBwYXNzd29yZDogaGFzaFBhc3MsXHJcbiAgICAgICAgICAgICAgICAgIHJvbGU6IFwidXNlclwiLFxyXG4gICAgICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICAgICAgLy8gaWYgYWNjb3VudCB3YXMgY3JlYXRlZCB0aGVuIHNlbmQgc3VjY2VzcyBtZXNzYWdlXHJcbiAgICAgICAgICAgICAgICBpZiAoY3JlYXRlQWNjb3VudCkge1xyXG4gICAgICAgICAgICAgICAgICBzdWNjZXNzZXMucHVzaChcIllvdXIgYWNjb3VudCBoYXMgYmVlbiBjcmVhdGVkXCIpO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgLy8gaWYgYWNjb3VudCB3YXMgbm90IGNyZWF0ZWQgdGhlbiBzZW5kIGVycm9yIG1lc3NhZ2VcclxuICAgICAgICAgICAgICAgICAgZXJyb3JzLnB1c2goXHJcbiAgICAgICAgICAgICAgICAgICAgXCJZb3VyIGFjY291bnQgd2FzIG5vdCBjcmVhdGVkLCBzb21ldGhpbmcgd2VudCB3cm9uZ1wiXHJcbiAgICAgICAgICAgICAgICAgICk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIC8vIGlmIHBhc3N3b3JkIHdhcyBub3QgaGFzaGVkIHRoZW4gc2VuZCBlcnJvciBtZXNzYWdlXHJcbiAgICAgICAgICAgICAgICBlcnJvcnMucHVzaChcclxuICAgICAgICAgICAgICAgICAgXCJTb21ldGhpbmcgd2VudCB3cm9uZyB3aGlsZSBzZWN1cmluZyB5b3VyIHBhc3N3b3JkIHBsZWFzZSB0cnkgYWdhaW5cIlxyXG4gICAgICAgICAgICAgICAgKTtcclxuICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIC8vIGlmIEUtbWFpbCBzdWJtaXR0ZWQgd2FzIG5vdCBhIHZhbGlkIGVtYWlsIHNlbmQgZXJyb3IgbWVzc2FnZVxyXG4gICAgICAgICAgICBlcnJvcnMucHVzaChcIllvdXIgRS1tYWlsIGlzIG5vdCBWYWxpZFwiKTtcclxuICAgICAgICAgIH1cclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgLy8gaWYgZWl0aGVyIGVtYWlsIG9yIHBhc3N3b3JkIGZpZWxkIHdhcyBlbXB0eSBzZW5kIGVycm9yIG1lc3NhZ2VcclxuICAgICAgICAgIGVycm9ycy5wdXNoKFwiUGxlYXNlIGZpbGwgaW4geW91ciBFLW1haWwgYW5kIFBhc3N3b3JkXCIpO1xyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIC8vIElmIGl0IGlzIGEgKFJlYWQpIHJlcXVlc3RcclxuICAgIGlmIChvcGVyYXRpb24gPT09IFwicmVhZFwiKSB7XHJcbiAgICAgIC8vIElmIG9wZXJhdGlvbiB0eXBlIGlzIHNldCB0byAoZ2V0QWxsVXNlcnMpXHJcbiAgICAgIGlmIChvcGVyYXRpb25UeXBlID09PSBcImdldEFsbFVzZXJzXCIpIHtcclxuICAgICAgICAvLyBHZXQgYWxsIHVzZXJzIG5hbWUgd2l0aCB0aGUgcm9sZSBvZiB1c2VyXHJcbiAgICAgICAgY29uc3QgdXNlciA9IGF3YWl0IHVzZXJJbmZvXHJcbiAgICAgICAgICAuZmluZCh7IHJvbGU6IFwidXNlclwiIH0pXHJcbiAgICAgICAgICAuc2VsZWN0KFwiLWVtYWlsIC1hZGRyZXNzIC1yb2xlIC1fX3YgLXBhc3N3b3JkXCIpO1xyXG5cclxuICAgICAgICBpZiAodXNlcikge1xyXG4gICAgICAgICAgLy8gSWYgdXNlcnMgZm91bmQgdGhlbiBzZW5kIHRoZSB1c2VyIGRhdGEgYW5kIHN1Y2Nlc3MgbWVzc2FnZVxyXG4gICAgICAgICAgc3VjY2Vzc2VzLnB1c2goXCJVc2VycyBGb3VuZFwiKTtcclxuICAgICAgICAgIHJlc3VsdCA9IHVzZXI7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgIC8vIElmIHVzZXJzIG5vdCBmb3VuZCB0aGVuIHNlbmQgZXJyb3IgbWVzc2FnZVxyXG4gICAgICAgICAgZXJyb3JzLnB1c2goXCJVc2VycyBub3QgZm91bmRcIik7XHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcblxyXG4gICAgICAvLyBJZiBvcGVyYXRpb24gdHlwZSBpcyBzZXQgdG8gKHVzZXJJbmZvKVxyXG4gICAgICBpZiAob3BlcmF0aW9uVHlwZSA9PT0gXCJ1c2VySW5mb1wiKSB7XHJcbiAgICAgICAgY29uc3QgZW1haWwgPSBib2R5LmVtYWlsO1xyXG5cclxuICAgICAgICAvLyBnZXQgYWxsIHVzZXJzIGJ5IHRoZXJlIGVtYWlsXHJcbiAgICAgICAgY29uc3QgdXNlciA9IGF3YWl0IHVzZXJJbmZvLmZpbmRPbmUoeyBlbWFpbCB9KS5zZWxlY3QoXCItX192IC1wYXNzd29yZFwiKTtcclxuXHJcbiAgICAgICAgaWYgKHVzZXIpIHtcclxuICAgICAgICAgIC8vIElmIHVzZXJzIGZvdW5kIHRoZW4gc2VuZCB0aGUgdXNlciBkYXRhIGFuZCBzdWNjZXNzIG1lc3NhZ2VcclxuICAgICAgICAgIHN1Y2Nlc3Nlcy5wdXNoKFwiVXNlciBGb3VuZFwiKTtcclxuICAgICAgICAgIHJlc3VsdCA9IHVzZXI7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgIC8vIElmIHVzZXJzIG5vdCBmb3VuZCB0aGVuIHNlbmQgZXJyb3IgbWVzc2FnZVxyXG4gICAgICAgICAgZXJyb3JzLnB1c2goXCJVc2VyIG5vdCBmb3VuZFwiKTtcclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIC8vIElmIG9wZXJhdGlvbiB0eXBlIGlzIHNldCB0byAodXNlckxvZ2luKVxyXG4gICAgICBpZiAob3BlcmF0aW9uVHlwZSA9PT0gXCJ1c2VyTG9naW5cIikge1xyXG4gICAgICAgIGNvbnN0IGVtYWlsID0gYm9keS5lbWFpbDtcclxuICAgICAgICBjb25zdCBwYXNzd29yZCA9IGJvZHkucGFzc3dvcmQ7XHJcbiAgICAgICAgY29uc3Qgcm9sZSA9IGJvZHkucm9sZTtcclxuICAgICAgICBsZXQgdXNlckRhdGEgPSBudWxsO1xyXG4gICAgICAgIGxldCB1c2VyID0gbnVsbDtcclxuXHJcbiAgICAgICAgbGV0IGVtYWlsVmVyaWZpZWQgPSBmYWxzZTtcclxuICAgICAgICBsZXQgcGFzc1ZlcmlmaWVkID0gZmFsc2U7XHJcbiAgICAgICAgbGV0IHJvbGVWZXJpZmllZCA9IGZhbHNlO1xyXG5cclxuICAgICAgICAvLyBDaGVjayBpZiBFLW1haWwgZmllbGQgaXMgZW1wdHlcclxuICAgICAgICBpZiAoZW1haWwubGVuZ3RoIDw9IDApIHtcclxuICAgICAgICAgIGVycm9ycy5wdXNoKFwiRW1haWwgaXMgZW1wdHlcIik7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyBDaGVjayBpZiBwYXNzd29yZCBmaWVsZCBpcyBlbXB0eVxyXG4gICAgICAgIGlmIChwYXNzd29yZC5sZW5ndGggPD0gMCkge1xyXG4gICAgICAgICAgZXJyb3JzLnB1c2goXCJQYXNzd29yZCBpcyBlbXB0eVwiKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vIGlmIGJvdGggRS1tYWlsIGFuZCBQYXNzd29yZCBmaWVsZCBpcyBub3QgZW1wdHkgdGhlbiBjb250aW51ZVxyXG4gICAgICAgIGlmIChlbWFpbC5sZW5ndGggPiAwICYmIHBhc3N3b3JkLmxlbmd0aCA+IDApIHtcclxuICAgICAgICAgIC8vIENoZWNrIGlmIHVzZXIgZXhpc3RzXHJcbiAgICAgICAgICB1c2VyRGF0YSA9IGF3YWl0IHVzZXJJbmZvLmZpbmRPbmUoeyBlbWFpbCB9KTtcclxuXHJcbiAgICAgICAgICBpZiAodXNlckRhdGEpIHtcclxuICAgICAgICAgICAgLy8gU2V0IHRvIHRydWUgdG8gaW5kaWNhdGUgZW1haWwgaXMgdmVyaWZpZWRcclxuICAgICAgICAgICAgZW1haWxWZXJpZmllZCA9IHRydWU7XHJcblxyXG4gICAgICAgICAgICAvLyBjaGVjayBpZiBzZW50IHJvbGUgYW5kIHVzZXIncyByb2xlIGFyZSB0aGUgc2FtZVxyXG4gICAgICAgICAgICBpZiAodXNlckRhdGEucm9sZSA9PT0gcm9sZSkge1xyXG4gICAgICAgICAgICAgIC8vIFNldCB0byB0cnVlIHRvIGluZGljYXRlIHVzZXIgcm9sZSBpcyB2ZXJpZmllZFxyXG4gICAgICAgICAgICAgIHJvbGVWZXJpZmllZCA9IHRydWU7XHJcblxyXG4gICAgICAgICAgICAgIGlmIChlbWFpbFZlcmlmaWVkKSB7XHJcbiAgICAgICAgICAgICAgICAvLyBoYXNoIHRoZSBwYXNzd29yZFxyXG4gICAgICAgICAgICAgICAgY29uc3QgaGFzaFBhc3MgPSB1c2VyRGF0YS5wYXNzd29yZDtcclxuXHJcbiAgICAgICAgICAgICAgICAvLyBDb21wYXJlIHdpdGggc2VudCBwYXNzd29yZFxyXG4gICAgICAgICAgICAgICAgY29uc3QgY29tcGFyZV9wYXNzID0gYXdhaXQgYmNyeXB0LmNvbXBhcmUocGFzc3dvcmQsIGhhc2hQYXNzKTtcclxuXHJcbiAgICAgICAgICAgICAgICBpZiAoY29tcGFyZV9wYXNzKSB7XHJcbiAgICAgICAgICAgICAgICAgIC8vIGlmIHBhc3N3b3JkIGNvbXBhcmlzb24gaXMgdHJ1ZSB0aGVuIHNldCB0byB0cnVlXHJcbiAgICAgICAgICAgICAgICAgIHBhc3NWZXJpZmllZCA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAvLyBpZiBwYXNzd29yZCBjb21wYXJpc29uIGlzIGZhbHNlIHRoZW4gc2V0IGVycm9yXHJcbiAgICAgICAgICAgICAgICAgIGVycm9ycy5wdXNoKFwicGFzc3dvcmQgaXMgbm90IGNvcnJlY3RcIik7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIC8vIGlmIEUtbWFpbCBpcyBub3QgdmVyaWZpZWQgc2VudCBlcnJvclxyXG4gICAgICAgICAgICAgICAgZXJyb3JzLnB1c2goXCJFbWFpbCBpcyBub3QgQ29ycmVjdFwiKTtcclxuICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgLy8gaWYgdXNlciByb2xlIGlzIG5vdCB2ZXJpZmllZCBzZW50IGVycm9yXHJcbiAgICAgICAgICAgICAgZXJyb3JzLnB1c2goXCJZb3UgYXJlIG5vdCB0aGUgY29ycmVjdCB1c2VyXCIpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAvLyBpZiB1c2VyIEUtbWFpbCBkb2VzIG5vdCBleGlzdHMgdGhlbiBzZW50IGVycm9yXHJcbiAgICAgICAgICAgIGVycm9ycy5wdXNoKFwiWW91ciBFbWFpbCBpcyBpbnZhbGlkXCIpO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8gSWYgYm90aCBFLW1haWwgYW5kIHBhc3N3b3JkIGFyZSB2ZXJpZmllZCB0aGVuIGNvbnRpbnVlXHJcbiAgICAgICAgaWYgKGVtYWlsVmVyaWZpZWQgJiYgcGFzc1ZlcmlmaWVkKSB7XHJcbiAgICAgICAgICBjb25zdCBlbWFpbCA9IGF3YWl0IHVzZXJEYXRhLmVtYWlsO1xyXG4gICAgICAgICAgY29uc3QgdG9rZW4gPSBjcmVhdGVUb2tlbihcIjFcIik7XHJcbiAgICAgICAgICBjb25zdCByZWZyZXNoVG9rZW4gPSBjcmVhdGVSZWZyZXNoVG9rZW4oMSk7XHJcblxyXG4gICAgICAgICAgLy8gU2V0IHVzZXIgZGF0YSB0byBzZW5kIHRvIGNyZWRlbnRpYWxzIGF1dGhlbnRpY2F0aW9uIHByb2Nlc3NcclxuICAgICAgICAgIHVzZXIgPSB7XHJcbiAgICAgICAgICAgIGVtYWlsLFxyXG4gICAgICAgICAgICBkYXRhOiB7XHJcbiAgICAgICAgICAgICAgZGFkYTogXCJtb3JlIERhdGFcIixcclxuICAgICAgICAgICAgICB0b2tlbixcclxuICAgICAgICAgICAgICByZWZyZXNoVG9rZW4sXHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICB9O1xyXG5cclxuICAgICAgICAgIHJlc3VsdCA9IHVzZXI7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgIC8vIElmIGVpdGhlciBFLW1haWwgb3IgcGFzc3dvcmQgYXJlIG5vdCB2ZXJpZmllZCB0aGVuIHNldCBlcnJvclxyXG4gICAgICAgICAgZXJyb3JzLnB1c2goXHJcbiAgICAgICAgICAgIFwiU29tZXRoaW5nIHdlbnQgd3JvbmcgXFxuIFBsZWFzZSBDaGVjayBZb3VyIEUtbWFpbCBhbmQgUGFzc3dvcmRcIlxyXG4gICAgICAgICAgKTtcclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICAvLyBJZiBpdCBpcyBhIChVcGRhdGUpIHJlcXVlc3RcclxuICAgIGlmIChvcGVyYXRpb24gPT09IFwidXBkYXRlXCIpIHtcclxuICAgICAgLy8gSWYgb3BlcmF0aW9uIHR5cGUgaXMgc2V0IHRvICh1cGRhdGVVc2VyKVxyXG4gICAgICBpZiAob3BlcmF0aW9uVHlwZSA9PT0gXCJ1cGRhdGVVc2VyXCIpIHtcclxuICAgICAgICBjb25zdCB1c2VySUQgPSBib2R5LnVzZXJJRDtcclxuICAgICAgICBjb25zdCBpbWFnZSA9IGJvZHkuaW1hZ2U7XHJcbiAgICAgICAgY29uc3QgdXNlcm5hbWUgPSBib2R5LnVzZXJuYW1lO1xyXG4gICAgICAgIGNvbnN0IGVtYWlsID0gYm9keS5lbWFpbDtcclxuICAgICAgICBjb25zdCBhZGRyZXNzID0gYm9keS5hZGRyZXNzO1xyXG4gICAgICAgIGNvbnN0IHBhc3N3b3JkID0gYm9keS5wYXNzd29yZDtcclxuICAgICAgICBjb25zdCBjb25maXJtUGFzc3dvcmQgPSBib2R5LmNvbmZpcm1QYXNzd29yZDtcclxuXHJcbiAgICAgICAgbGV0IHVzZXJEYXRhO1xyXG4gICAgICAgIGxldCBwYXNzVmVyaWZpZWQgPSBmYWxzZTtcclxuXHJcbiAgICAgICAgLy8gY2hlY2sgaWYgcGFzc3dvcmQgd2FzIHNlbnQgb3Igbm90XHJcbiAgICAgICAgaWYgKHBhc3N3b3JkLmxlbmd0aCA+IDApIHtcclxuICAgICAgICAgIC8vIGNoZWNrIGlmIHBhc3N3b3JkIGFuZCBjb25maXJtIHBhc3N3b3JkIGZpZWxkIG1hdGNoXHJcbiAgICAgICAgICBpZiAocGFzc3dvcmQgPT09IGNvbmZpcm1QYXNzd29yZCkge1xyXG4gICAgICAgICAgICBwYXNzVmVyaWZpZWQgPSB0cnVlO1xyXG4gICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgLy8gY2hlY2sgaWYgcGFzc3dvcmQgYW5kIGNvbmZpcm0gcGFzc3dvcmQgZmllbGQgbWF0Y2hcclxuICAgICAgICAgICAgZXJyb3JzLnB1c2goXCJZb3VyIHBhc3N3b3JkIGFuZCBjb3JyZWN0IHBhc3N3b3JkIGRvIG5vdCBtYXRjaFwiKTtcclxuICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vIGNoZWNrIGlmIGltYWdlIHdhcyBzZW50XHJcbiAgICAgICAgaWYgKGltYWdlLmxlbmd0aCA+IDApIHtcclxuICAgICAgICAgIGNvbnN0IHVwbG9hZEltYWdlID0gYXdhaXQgdXNlckluZm8uZmluZEJ5SWRBbmRVcGRhdGUodXNlcklELCB7XHJcbiAgICAgICAgICAgIGltYWdlLFxyXG4gICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyBpZiBwYXNzd29yZCB3YXMgc2VudFxyXG4gICAgICAgIGlmIChwYXNzVmVyaWZpZWQpIHtcclxuICAgICAgICAgIGNvbnN0IGhhc2hQYXNzd29yZCA9IGJjcnlwdC5oYXNoU3luYyhwYXNzd29yZCwgMTApO1xyXG5cclxuICAgICAgICAgIC8vIFVwZGF0ZSB1c2VyIGRhdGEgd2l0aCBwYXNzd29yZFxyXG4gICAgICAgICAgdXNlckRhdGEgPSBhd2FpdCB1c2VySW5mby5maW5kQnlJZEFuZFVwZGF0ZSh1c2VySUQsIHtcclxuICAgICAgICAgICAgdXNlcm5hbWUsXHJcbiAgICAgICAgICAgIGVtYWlsLFxyXG4gICAgICAgICAgICBhZGRyZXNzLFxyXG4gICAgICAgICAgICBwYXNzd29yZDogaGFzaFBhc3N3b3JkLFxyXG4gICAgICAgICAgfSk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgIC8vIFVwZGF0ZSB1c2VyIGRhdGEgd2l0aG91dCBwYXNzd29yZFxyXG4gICAgICAgICAgdXNlckRhdGEgPSBhd2FpdCB1c2VySW5mby5maW5kQnlJZEFuZFVwZGF0ZShcclxuICAgICAgICAgICAgdXNlcklELFxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgdXNlcm5hbWUsXHJcbiAgICAgICAgICAgICAgZW1haWwsXHJcbiAgICAgICAgICAgICAgYWRkcmVzcyxcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgIG5ldzogdHJ1ZSxcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vIGlmIHVzZXIgZGF0YSB3YXMgdXBkYXRlZCB0aGVuXHJcbiAgICAgICAgaWYgKHVzZXJEYXRhKSB7XHJcbiAgICAgICAgICAvLyBzZXQgc3VjY2VzcyBtZXNzYWdlIGFuZCBzZXQgcmVzdWx0IHRvIHNlbnQgYmFjayB0byB1c2VyXHJcbiAgICAgICAgICBzdWNjZXNzZXMucHVzaChcIllvdXIgZGF0YSBoYXMgYmVlbiB1cGRhdGVkXCIpO1xyXG4gICAgICAgICAgcmVzdWx0ID0gdXNlckRhdGE7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgIC8vIHNldCBlcnJvciBtZXNzYWdlIGlmIHVzZXIgZGF0YSB3YXMgbm90IHVwZGF0ZWRcclxuICAgICAgICAgIGVycm9ycy5wdXNoKFwiWW91ciBkYXRhIGNvdWxkIG5vdCBiZSB1cGRhdGVkXCIpO1xyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIC8vIElmIGl0IGlzIGEgKERlbGV0ZSkgcmVxdWVzdFxyXG4gICAgaWYgKG9wZXJhdGlvbiA9PT0gXCJkZWxldGVcIikge1xyXG4gICAgfVxyXG5cclxuICAgIC8vIFNlbmQgdGhlIHJlc3BvbnNlXHJcbiAgICBpZiAoZXJyb3JzLmxlbmd0aCA9PT0gMCkge1xyXG4gICAgICByZXMuc3RhdHVzKDIwMCkuc2VuZCh7IHN1Y2Nlc3NlcywgcmVzdWx0IH0pO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgcmVzLnN0YXR1cyg0MDApLnNlbmQoZXJyb3JzKTtcclxuICAgIH1cclxuICB9XHJcbn1cclxuIl0sIm5hbWVzIjpbIm1vbmdvb3NlIiwiZGJDb25uZWN0IiwidXNlckluZm8iLCJiY3J5cHQiLCJ2YWxpZGF0b3IiLCJqd3QiLCJheGlvcyIsImhhbmRsZSIsInJlcSIsInJlcyIsInN1Y2Nlc3NlcyIsImVycm9ycyIsInJlc3VsdCIsIm1ldGhvZCIsImNyZWF0ZVRva2VuIiwiaWQiLCJtYXhBZ2UiLCJ0b2tlbiIsInNpZ24iLCJleHBpcmVzSW4iLCJjcmVhdGVSZWZyZXNoVG9rZW4iLCJib2R5Iiwib3BlcmF0aW9uIiwib3BlcmF0aW9uVHlwZSIsImVtYWlsIiwicGFzc3dvcmQiLCJoYXNoUGFzcyIsImNyZWF0ZUFjY291bnQiLCJlbWFpbFZhbCIsImxlbmd0aCIsImlzRW1haWwiLCJlbWFpbENoZWNrIiwiZmluZE9uZSIsInB1c2giLCJoYXNoU3luYyIsImNyZWF0ZSIsInJvbGUiLCJ1c2VyIiwiZmluZCIsInNlbGVjdCIsInVzZXJEYXRhIiwiZW1haWxWZXJpZmllZCIsInBhc3NWZXJpZmllZCIsInJvbGVWZXJpZmllZCIsImNvbXBhcmVfcGFzcyIsImNvbXBhcmUiLCJyZWZyZXNoVG9rZW4iLCJkYXRhIiwiZGFkYSIsInVzZXJJRCIsImltYWdlIiwidXNlcm5hbWUiLCJhZGRyZXNzIiwiY29uZmlybVBhc3N3b3JkIiwidXBsb2FkSW1hZ2UiLCJmaW5kQnlJZEFuZFVwZGF0ZSIsImhhc2hQYXNzd29yZCIsIm5ldyIsInN0YXR1cyIsInNlbmQiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(api)/./pages/api/postUser.js\n");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../webpack-api-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = (__webpack_exec__("(api)/./pages/api/postUser.js"));
module.exports = __webpack_exports__;

})();